apply plugin: 'java'
apply plugin: 'idea'

apply from: "external-dependencies.gradle"
apply from: "idea-config.gradle"

group 'mint'
version '1.0-SNAPSHOT'


sourceCompatibility = 1.8
targetCompatibility = 1.8

task wrapper(type: Wrapper) {
    gradleVersion = '2.4'
}

repositories {
    mavenCentral()
}

//noinspection GroovyAssignabilityCheck
dependencies {
    compile rabbitMQ, apacheCommonsConfiguration, postgresClient

    testCompile junit
}

jar {
    doFirst {
        from {
            configurations.runtime.files.collect{ it }
        }
        manifest {
            attributes(
                    "Main-Class": "uk.gov.Application",
                    "Class-Path": configurations.compile.findAll { !it.directory }.collect { it.name }.join(' ')
            )
        }
    }
}
