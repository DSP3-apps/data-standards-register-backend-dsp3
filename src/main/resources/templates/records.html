<!DOCTYPE html>

<html xmlns:th="http://www.thymeleaf.org" xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head th:include="main.html::head"></head>
<body>
  <header th:replace="main.html::global-header"></header>

  <div id="wrapper">

    <main id="main" role="main">
      <div th:replace="fragments/phase-banner.html::phase"></div>
      <div class="grid-row">
        <div class="column-two-thirds">
          <h1 class="heading-large" th:include="fragments/pagination.html::pagination-top('records')">
          </h1>
        </div>
        <div class="column-third" th:include="fragments/attribution.html::attribution"></div>
      </div>
      <div class="table-wrapper">
        <table th:if="${!content.records.isEmpty()}">
          <thead>
            <tr>
              <th scope="col">
                <a th:href="${linkResolver.resolve(new uk.gov.register.core.RegisterName('field'), registerId)}" th:text="${registerId}"></a>
              </th>
              <th:block th:each="fieldName : ${register.nonPrimaryFields}">
                <th scope="col">
                  <a th:href="${linkResolver.resolve(new uk.gov.register.core.RegisterName('field'), fieldName)}" th:text="${fieldName}"></a>
                </th>
              </th:block>
            </tr>
          </thead>
          <tbody>
            <tr th:each="record : ${content.records}">
              <td>
                <a th:href="${'/record/' + record.primaryKey}" th:text="${record.primaryKey}"></a>
              </td>
              <th:block th:each="fieldName : ${register.nonPrimaryFields}">
                <td th:if="${record.getField(fieldName).present}" class="field-list field-list-in-table">
                  <ul th:if="${record.getField(fieldName).get().isList()}">
                    <th:block th:each="fieldValue: ${record.getField(fieldName).get()}">
                      <li th:text="${fieldValue.value}"></li>
                    </th:block>
                  </ul>
                  <th:block th:unless="${record.getField(fieldName).get().isList()}" th:text="${record.getField(fieldName).get().value}">
                  </th:block>
                </td>
                <td th:unless="${record.getField(fieldName).present}"></td>
              </th:block>
            </tr>
          </tbody>
        </table>
      </div>

      <nav th:replace="fragments/pagination.html::pagination-bottom"></nav>

      <div th:include="fragments/data-formats.html::data-formats"></div>
    </main>
  </div>

  <footer th:replace="fragments/footer.html::footer"></footer>

</body>
</html>
